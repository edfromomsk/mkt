<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="252px" preserveAspectRatio="none" style="width:656px;height:252px;background:#24272B;" version="1.1" viewBox="0 0 656 252" width="656px" zoomAndPan="magnify"><defs/><g><rect fill="#7FAFE1" height="131.2422" style="stroke:#7FAFE1;stroke-width:1.0;" width="10" x="267" y="67.7988"/><rect fill="#7FAFE1" height="72.6211" style="stroke:#7FAFE1;stroke-width:1.0;" width="10" x="452" y="97.1094"/><rect fill="#7FAFE1" height="29.3105" style="stroke:#7FAFE1;stroke-width:1.0;" width="10" x="620" y="169.7305"/><line style="stroke:#7FAFE1;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="78" x2="78" y1="36.4883" y2="217.041"/><line style="stroke:#7FAFE1;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="272" x2="272" y1="36.4883" y2="217.041"/><line style="stroke:#7FAFE1;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="457" x2="457" y1="36.4883" y2="217.041"/><line style="stroke:#7FAFE1;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="624.5" x2="624.5" y1="36.4883" y2="217.041"/><rect fill="#7FAFE1" height="30.4883" rx="10" ry="10" style="stroke:#7FAFE1;stroke-width:0.5;" width="146" x="5" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="12" y="25.5352">Админка контента</text><rect fill="#7FAFE1" height="30.4883" rx="10" ry="10" style="stroke:#7FAFE1;stroke-width:0.5;" width="146" x="5" y="216.041"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="12" y="236.5762">Админка контента</text><rect fill="#7FAFE1" height="30.4883" rx="10" ry="10" style="stroke:#7FAFE1;stroke-width:0.5;" width="222" x="161" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="208" x="168" y="25.5352">content-card-reference-cards</text><rect fill="#7FAFE1" height="30.4883" rx="10" ry="10" style="stroke:#7FAFE1;stroke-width:0.5;" width="222" x="161" y="216.041"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="208" x="168" y="236.5762">content-card-reference-cards</text><rect fill="#7FAFE1" height="30.4883" rx="10" ry="10" style="stroke:#7FAFE1;stroke-width:0.5;" width="32" x="441" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="448" y="25.5352">db</text><rect fill="#7FAFE1" height="30.4883" rx="10" ry="10" style="stroke:#7FAFE1;stroke-width:0.5;" width="32" x="441" y="216.041"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="448" y="236.5762">db</text><rect fill="#7FAFE1" height="30.4883" rx="10" ry="10" style="stroke:#7FAFE1;stroke-width:0.5;" width="51" x="599.5" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="606.5" y="25.5352">kafka</text><rect fill="#7FAFE1" height="30.4883" rx="10" ry="10" style="stroke:#7FAFE1;stroke-width:0.5;" width="51" x="599.5" y="216.041"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="606.5" y="236.5762">kafka</text><rect fill="#7FAFE1" height="131.2422" style="stroke:#7FAFE1;stroke-width:1.0;" width="10" x="267" y="67.7988"/><rect fill="#7FAFE1" height="72.6211" style="stroke:#7FAFE1;stroke-width:1.0;" width="10" x="452" y="97.1094"/><rect fill="#7FAFE1" height="29.3105" style="stroke:#7FAFE1;stroke-width:1.0;" width="10" x="620" y="169.7305"/><polygon fill="#7FAFE1" points="255,63.7988,265,67.7988,255,71.7988,259,67.7988" style="stroke:#7FAFE1;stroke-width:1.0;"/><line style="stroke:#7FAFE1;stroke-width:1.0;" x1="78" x2="261" y1="67.7988" y2="67.7988"/><text fill="#7FAFE1" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="85" y="63.0566">1</text><text fill="#7FAFE1" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="98" y="63.0566">запрос наложения</text><polygon fill="#7FAFE1" points="440,93.1094,450,97.1094,440,101.1094,444,97.1094" style="stroke:#7FAFE1;stroke-width:1.0;"/><line style="stroke:#7FAFE1;stroke-width:1.0;" x1="277" x2="446" y1="97.1094" y2="97.1094"/><text fill="#7FAFE1" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="284" y="92.3672">2</text><text fill="#7FAFE1" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="297" y="92.3672">сбор КТ</text><polygon fill="#7FAFE1" points="288,107.1094,278,111.1094,288,115.1094,284,111.1094" style="stroke:#7FAFE1;stroke-width:1.0;"/><line style="stroke:#7FAFE1;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="282" x2="451" y1="111.1094" y2="111.1094"/><polygon fill="#7FAFE1" points="440,136.4199,450,140.4199,440,144.4199,444,140.4199" style="stroke:#7FAFE1;stroke-width:1.0;"/><line style="stroke:#7FAFE1;stroke-width:1.0;" x1="277" x2="446" y1="140.4199" y2="140.4199"/><text fill="#7FAFE1" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="284" y="135.6777">3</text><text fill="#7FAFE1" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="297" y="135.6777">наложение ЭКТ на КТ</text><polygon fill="#7FAFE1" points="608,165.7305,618,169.7305,608,173.7305,612,169.7305" style="stroke:#7FAFE1;stroke-width:1.0;"/><line style="stroke:#7FAFE1;stroke-width:1.0;" x1="457" x2="614" y1="169.7305" y2="169.7305"/><text fill="#7FAFE1" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="464" y="164.9883">4</text><text fill="#7FAFE1" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="477" y="164.9883">content-card-batch</text><polygon fill="#7FAFE1" points="613,195.041,623,199.041,613,203.041,617,199.041" style="stroke:#7FAFE1;stroke-width:1.0;"/><line style="stroke:#7FAFE1;stroke-width:1.0;" x1="272" x2="619" y1="199.041" y2="199.041"/><text fill="#7FAFE1" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="279" y="194.2988">5</text><text fill="#7FAFE1" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="292" y="194.2988">nmid-rcid</text><!--MD5=[5b5cfa8598fb3bbc882382f45c528437]
@startuml
skinparam DefaultFontColor #7fafe1
skinparam BackgroundColor #24272b
skinparam roundcorner 20

skinparam sequence {
    ArrowColor #7fafe1
    LifeLineBorderColor #7fafe1 
    LifeLineBackgroundColor #7fafe1
    ParticipantBorderColor #7fafe1 
    ParticipantBackgroundColor #7fafe1 
    ParticipantFontColor white

    ActorBorderColor #7fafe1 
    ActorBackgroundColor #7fafe1
}
autonumber
participant "Админка контента" as admin
participant "content-card-reference-cards" as ccrc

admin -> ccrc: запрос наложения

activate ccrc
ccrc -> db: сбор КТ
activate db
autonumber stop
db - -> ccrc
autonumber resume

ccrc -> db: наложение ЭКТ на КТ

deactivate admin
db -> kafka: content-card-batch
deactivate db
activate kafka

ccrc -> kafka: nmid-rcid
deactivate kafka





deactivate ccrc

@enduml

PlantUML version 1.2022.7(Mon Aug 22 20:01:30 MSK 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: ru
Country: RU
--></g></svg>